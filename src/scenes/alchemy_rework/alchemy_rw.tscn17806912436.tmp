[gd_scene load_steps=10 format=4 uid="uid://l0275t8xlklw"]

[ext_resource type="Script" uid="uid://cipqkh45vxv1h" path="res://src/scenes/alchemy_rework/alchemy_engine.gd" id="1_o51qu"]
[ext_resource type="Script" uid="uid://cnbdsiullaf7m" path="res://src/scenes/alchemy_rework/inventory_handler.gd" id="2_6ltwf"]
[ext_resource type="Script" uid="uid://brvessbolaby8" path="res://src/scenes/alchemy_rework/ingredient_picking_handler.gd" id="3_lshtr"]
[ext_resource type="TileSet" uid="uid://bp752s7egg0fe" path="res://src/unique/extras/tileset_alchemy.tres" id="4_bxucp"]
[ext_resource type="Theme" uid="uid://b2ua22bq3la3m" path="res://src/unique/theme/alchemy_theme.tres" id="5_6ltwf"]
[ext_resource type="Script" uid="uid://frmf00t4w3tn" path="res://src/scenes/alchemy_rework/save_mix_container.gd" id="5_lshtr"]
[ext_resource type="Script" uid="uid://c5e14mk5dnb5u" path="res://src/scenes/alchemy_rework/potion_selector.gd" id="5_qdnla"]
[ext_resource type="Texture2D" uid="uid://blxwrxfqgyiwd" path="res://assets/potions/tutorial_potion.png" id="6_fasen"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_lshtr"]

[node name="Alchemy" type="Node2D"]

[node name="AlchemyEngine" type="Node" parent="." node_paths=PackedStringArray("InventoryHandler", "workplace_tilemap_layer", "ghost_tilemap_layer", "save_popup") groups=["Engines"]]
script = ExtResource("1_o51qu")
InventoryHandler = NodePath("../InventoryHandler")
workplace_tilemap_layer = NodePath("../WorkPlaceTilemapLayer")
ghost_tilemap_layer = NodePath("../PlaceGhostTilemapLayer")
save_popup = NodePath("../SaveMixContainer")

[node name="InventoryHandler" type="Node" parent="." node_paths=PackedStringArray("IngredientItemList") groups=["Engines"]]
script = ExtResource("2_6ltwf")
IngredientItemList = NodePath("../IngredientsContainer/PotionSelector/Ingredients")

[node name="IngredientPickingHandler" type="Node" parent="." node_paths=PackedStringArray("IngredientsItemList") groups=["Engines"]]
script = ExtResource("3_lshtr")
IngredientsItemList = NodePath("../IngredientsContainer/PotionSelector/Ingredients")

[node name="WorkPlaceTilemapLayer" type="TileMapLayer" parent="." groups=["Workplace"]]
position = Vector2(228, 173)
scale = Vector2(2, 2)
tile_map_data = PackedByteArray("AAD5//r/AQAAAAEAAAD5//v/AQAAAAEAAAD5//z/AQAAAAEAAAD5//3/AQAAAAEAAAD5//7/AQAAAAEAAAD5////AQAAAAEAAAD5/wAAAQAAAAEAAAD5/wEAAQAAAAEAAAD5/wIAAQAAAAEAAAD5/wMAAQAAAAEAAAD5/wQAAQAAAAEAAAD5/wUAAQAAAAEAAAD6//r/AQAAAAEAAAD6//v/AQAAAAEAAAD6//z/AQAAAAEAAAD6//3/AQAAAAEAAAD6//7/AQAAAAEAAAD6////AQAAAAEAAAD6/wAAAQAAAAEAAAD6/wEAAQAAAAEAAAD6/wIAAQAAAAEAAAD6/wMAAQAAAAEAAAD6/wQAAQAAAAEAAAD6/wUAAQAAAAEAAAD7//r/AQAAAAEAAAD7//v/AQAAAAEAAAD7//z/AQAAAAEAAAD7//3/AQAAAAEAAAD7//7/AQAAAAEAAAD7////AQAAAAEAAAD7/wAAAQAAAAEAAAD7/wEAAQAAAAEAAAD7/wIAAQAAAAEAAAD7/wMAAQAAAAEAAAD7/wQAAQAAAAEAAAD7/wUAAQAAAAEAAAD8//r/AQAAAAEAAAD8//v/AQAAAAEAAAD8//z/AQAAAAEAAAD8//3/AQAAAAEAAAD8//7/AQAAAAEAAAD8////AQAAAAEAAAD8/wAAAQAAAAEAAAD8/wEAAQAAAAEAAAD8/wIAAQAAAAEAAAD8/wMAAQAAAAEAAAD8/wQAAQAAAAEAAAD8/wUAAQAAAAEAAAD9//r/AQAAAAEAAAD9//v/AQAAAAEAAAD9//z/AQAAAAEAAAD9//3/AQAAAAEAAAD9//7/AQAAAAEAAAD9////AQAAAAAAAAD9/wAAAQAAAAAAAAD9/wEAAQAAAAAAAAD9/wIAAQAAAAAAAAD9/wMAAQAAAAAAAAD9/wQAAQAAAAAAAAD9/wUAAQAAAAEAAAD+//r/AQAAAAEAAAD+//v/AQAAAAEAAAD+//z/AQAAAAAAAAD+//3/AQAAAAAAAAD+//7/AQAAAAAAAAD+////AQAAAAAAAAD+/wQAAQAAAAAAAAD+/wUAAQAAAAEAAAD///r/AQAAAAEAAAD///v/AQAAAAEAAAD///z/AQAAAAAAAAD//wQAAQAAAAAAAAD//wUAAQAAAAEAAAAAAPr/AQAAAAEAAAAAAPv/AQAAAAEAAAAAAPz/AQAAAAAAAAAAAAQAAQAAAAAAAAAAAAUAAQAAAAEAAAABAPr/AQAAAAEAAAABAPv/AQAAAAEAAAABAPz/AQAAAAAAAAABAP3/AQAAAAAAAAABAP7/AQAAAAAAAAABAP//AQAAAAAAAAABAAQAAQAAAAAAAAABAAUAAQAAAAEAAAACAPr/AQAAAAEAAAACAPv/AQAAAAEAAAACAPz/AQAAAAEAAAACAP3/AQAAAAEAAAACAP7/AQAAAAEAAAACAP//AQAAAAAAAAACAAAAAQAAAAAAAAACAAEAAQAAAAAAAAACAAIAAQAAAAAAAAACAAMAAQAAAAAAAAACAAQAAQAAAAAAAAACAAUAAQAAAAEAAAADAPr/AQAAAAEAAAADAPv/AQAAAAEAAAADAPz/AQAAAAEAAAADAP3/AQAAAAEAAAADAP7/AQAAAAEAAAADAP//AQAAAAEAAAADAAEAAQAAAAEAAAADAAIAAQAAAAEAAAADAAMAAQAAAAEAAAADAAQAAQAAAAEAAAADAAUAAQAAAAEAAAAEAPr/AQAAAAEAAAAEAPv/AQAAAAEAAAAEAPz/AQAAAAEAAAAEAP3/AQAAAAEAAAAEAP7/AQAAAAEAAAAEAP//AQAAAAEAAAAEAAAAAQAAAAEAAAAEAAEAAQAAAAEAAAAEAAIAAQAAAAEAAAAEAAMAAQAAAAEAAAAEAAQAAQAAAAEAAAAEAAUAAQAAAAEAAAAFAPr/AQAAAAEAAAAFAPv/AQAAAAEAAAAFAPz/AQAAAAEAAAAFAP3/AQAAAAEAAAAFAP7/AQAAAAEAAAAFAP//AQAAAAEAAAAFAAAAAQAAAAEAAAAFAAEAAQAAAAEAAAAFAAIAAQAAAAEAAAAFAAMAAQAAAAEAAAAFAAQAAQAAAAEAAAAFAAUAAQAAAAEAAAAGAPr/AQAAAAEAAAAGAPv/AQAAAAEAAAAGAPz/AQAAAAEAAAAGAP3/AQAAAAEAAAAGAP7/AQAAAAEAAAAGAP//AQAAAAEAAAAGAAAAAQAAAAEAAAAGAAEAAQAAAAEAAAAGAAIAAQAAAAEAAAAGAAMAAQAAAAEAAAAGAAQAAQAAAAEAAAAGAAUAAQAAAAEAAAAHAPr/AQAAAAEAAAAHAPv/AQAAAAEAAAAHAPz/AQAAAAEAAAAHAP3/AQAAAAEAAAAHAP7/AQAAAAEAAAAHAP//AQAAAAEAAAAHAAAAAQAAAAEAAAAHAAEAAQAAAAEAAAAHAAIAAQAAAAEAAAAHAAMAAQAAAAEAAAAHAAQAAQAAAAEAAAAHAAUAAQAAAAEAAAAIAPr/AQAAAAEAAAAIAPv/AQAAAAEAAAAIAPz/AQAAAAEAAAAIAP3/AQAAAAEAAAAIAP7/AQAAAAEAAAAIAP//AQAAAAEAAAAIAAAAAQAAAAEAAAAIAAEAAQAAAAEAAAAIAAIAAQAAAAEAAAAIAAMAAQAAAAEAAAAIAAQAAQAAAAEAAAAIAAUAAQAAAAEAAAAJAPr/AQAAAAEAAAAJAPv/AQAAAAEAAAAJAPz/AQAAAAEAAAAJAP3/AQAAAAEAAAAJAP7/AQAAAAEAAAAJAP//AQAAAAEAAAAJAAAAAQAAAAEAAAAJAAEAAQAAAAEAAAAJAAIAAQAAAAEAAAAJAAMAAQAAAAEAAAAJAAQAAQAAAAEAAAAJAAUAAQAAAAEAAAAKAPr/AQAAAAEAAAAKAPv/AQAAAAEAAAAKAPz/AQAAAAEAAAAKAP3/AQAAAAEAAAAKAP7/AQAAAAEAAAAKAP//AQAAAAEAAAAKAAAAAQAAAAEAAAAKAAEAAQAAAAEAAAAKAAIAAQAAAAEAAAAKAAMAAQAAAAEAAAAKAAQAAQAAAAEAAAAKAAUAAQAAAAEAAAALAPr/AQAAAAEAAAALAPv/AQAAAAEAAAALAPz/AQAAAAEAAAALAP3/AQAAAAEAAAALAP7/AQAAAAEAAAALAP//AQAAAAEAAAALAAAAAQAAAAEAAAALAAEAAQAAAAEAAAALAAIAAQAAAAEAAAALAAMAAQAAAAEAAAALAAQAAQAAAAEAAAALAAUAAQAAAAEAAAAMAPr/AQAAAAEAAAAMAPv/AQAAAAEAAAAMAPz/AQAAAAEAAAAMAP3/AQAAAAEAAAAMAP7/AQAAAAEAAAAMAP//AQAAAAEAAAAMAAAAAQAAAAEAAAAMAAEAAQAAAAEAAAAMAAIAAQAAAAEAAAAMAAMAAQAAAAEAAAAMAAQAAQAAAAEAAAAMAAUAAQAAAAEAAAADAAAAAQAAAAEAAAA=")
tile_set = ExtResource("4_bxucp")

[node name="PlaceGhostTilemapLayer" type="TileMapLayer" parent="." groups=["Workplace"]]
modulate = Color(1, 1, 1, 0.498039)
position = Vector2(228, 173)
scale = Vector2(2, 2)
tile_set = ExtResource("4_bxucp")

[node name="------- UI -------" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_left = 440.0
offset_right = 640.0
offset_bottom = 360.0

[node name="IngredientsContainer" type="PanelContainer" parent="."]
offset_left = 440.0
offset_right = 640.0
offset_bottom = 360.0
theme_override_styles/panel = SubResource("StyleBoxEmpty_lshtr")

[node name="PotionSelector" type="VBoxContainer" parent="IngredientsContainer"]
layout_mode = 2
script = ExtResource("5_qdnla")

[node name="MarginContainer" type="MarginContainer" parent="IngredientsContainer/PotionSelector"]
layout_mode = 2

[node name="HBoxContainer" type="HBoxContainer" parent="IngredientsContainer/PotionSelector/MarginContainer"]
custom_minimum_size = Vector2(0, 64)
layout_mode = 2
alignment = 1

[node name="Button" type="Button" parent="IngredientsContainer/PotionSelector/MarginContainer/HBoxContainer"]
layout_mode = 2
text = "<"

[node name="PotionPreview" type="TextureRect" parent="IngredientsContainer/PotionSelector/MarginContainer/HBoxContainer"]
layout_mode = 2
texture = ExtResource("6_fasen")
expand_mode = 2

[node name="Button2" type="Button" parent="IngredientsContainer/PotionSelector/MarginContainer/HBoxContainer"]
layout_mode = 2
text = ">"

[node name="Ingredients" type="ItemList" parent="IngredientsContainer/PotionSelector"]
layout_mode = 2
size_flags_vertical = 3
allow_search = false
same_column_width = true
fixed_icon_size = Vector2i(32, 32)

[node name="FinishPotionButton" type="Button" parent="."]
offset_left = 176.0
offset_top = 336.0
offset_right = 288.0
offset_bottom = 356.0
text = "Finish"

[node name="DisableAnythingElsePanel" type="Panel" parent="."]
visible = false
self_modulate = Color(0, 0, 0, 1)
offset_left = -8.0
offset_top = -8.0
offset_right = 648.0
offset_bottom = 368.0

[node name="SaveMixContainer" type="PanelContainer" parent="." node_paths=PackedStringArray("background_panel", "effects_rich_label")]
visible = false
self_modulate = Color(0, 0, 0, 1)
offset_left = 80.0
offset_top = 80.0
offset_right = 384.0
offset_bottom = 240.0
script = ExtResource("5_lshtr")
background_panel = NodePath("../DisableAnythingElsePanel")
effects_rich_label = NodePath("ReviewContainer/EffectLabel")

[node name="ReviewContainer" type="MarginContainer" parent="SaveMixContainer"]
layout_mode = 2
theme = ExtResource("5_6ltwf")

[node name="QuestionLabel" type="Label" parent="SaveMixContainer/ReviewContainer"]
layout_mode = 2
size_flags_vertical = 0
theme_override_colors/font_color = Color(1, 1, 1, 1)
theme_override_colors/font_outline_color = Color(0.166667, 0.5, 0, 1)
theme_override_constants/outline_size = 8
text = "¡Felicidades, has descubierto un medicamento!"
horizontal_alignment = 1
vertical_alignment = 1
uppercase = true

[node name="EffectLabel" type="RichTextLabel" parent="SaveMixContainer/ReviewContainer"]
custom_minimum_size = Vector2(0, 64)
layout_mode = 2
size_flags_vertical = 4
bbcode_enabled = true
text = "[center]﻿&[/center]"
scroll_active = false
shortcut_keys_enabled = false
horizontal_alignment = 1
vertical_alignment = 1

[node name="HBoxContainer" type="HBoxContainer" parent="SaveMixContainer/ReviewContainer"]
custom_minimum_size = Vector2(0, 24)
layout_mode = 2
size_flags_vertical = 8
theme = ExtResource("5_6ltwf")
theme_override_constants/separation = 64
alignment = 1

[node name="SaveButton" type="Button" parent="SaveMixContainer/ReviewContainer/HBoxContainer"]
custom_minimum_size = Vector2(100, 0)
layout_mode = 2
text = "Aceptar"

[connection signal="pressed" from="IngredientsContainer/PotionSelector/MarginContainer/HBoxContainer/Button" to="IngredientsContainer/PotionSelector" method="_on_button_pressed"]
[connection signal="pressed" from="IngredientsContainer/PotionSelector/MarginContainer/HBoxContainer/Button2" to="IngredientsContainer/PotionSelector" method="_on_button_next_pressed"]
[connection signal="item_clicked" from="IngredientsContainer/PotionSelector/Ingredients" to="IngredientPickingHandler" method="_on_ingredient_clicked"]
[connection signal="pressed" from="FinishPotionButton" to="AlchemyEngine" method="_on_potion_finished"]
[connection signal="pressed" from="SaveMixContainer/ReviewContainer/HBoxContainer/SaveButton" to="SaveMixContainer" method="_on_save_button_pressed"]
